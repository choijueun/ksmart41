<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="k1.smart.team.mapper.CodeMapper">

<!-- 기본키 숫자부분 새로 형성 MAX+1  -->
<select id="getNewCodeNum" parameterType="String" resultType="String">
	SELECT
	<![CDATA[
		CASE
			WHEN (MAX(RIGHT(${codeName},3))+1 < 10) THEN CONCAT('00',MAX(RIGHT(${codeName},3))+1)
			WHEN (MAX(RIGHT(${codeName},3))+1 < 100) THEN CONCAT('0',MAX(RIGHT(${codeName},3))+1)
		ELSE MAX(RIGHT(${codeName},3))+1
		END AS newCodeNum
	]]>
	FROM
		${tableName};
</select>

</mapper>