<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="k1.smart.team.mapper.cje.StoringMapper">

<select id="getAllStoringList" parameterType="String" resultType="Storing">
	SELECT 
		 adj.stockAdjCode
		,adj.stockReasonCode
		,adj.totalPrice
		,adj.briefs
		,adj.requestDate
		,adj.adjDate
		,adj.endDate
		,adj.managerId
		,u.userName AS managerName
		,adj.regDate
		,adj.updateDate
	FROM 
		k1_tb_stock_adjustment AS adj
		JOIN
		k1_tb_user AS u
		ON
		adj.managerId = u.userId
	WHERE
		<trim prefixOverrides="AND |OR ">
			adj.mainBusinessCode = #{mainBusinessCode}
			<if test="stockReasonCode != null and stockReasonCode != ''.toString()">
				AND stockReasonCode = ${stockReasonCode}
			</if>
		</trim>
</select>

</mapper>